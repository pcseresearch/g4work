<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SBS: g4work/Ecal/src/ECalDetectorConstruction.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SBS
   </div>
   <div id="projectbrief">EM calorimeter</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9c39840aa8789535972e66165d835e82.html">g4work</a></li><li class="navelem"><a class="el" href="dir_fa9c7a7f20eb8cf29b1685c93a5f6099.html">Ecal</a></li><li class="navelem"><a class="el" href="dir_41e04918b5e4aa4624177f605a48dba4.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ECalDetectorConstruction.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_e_cal_detector_construction_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// ********************************************************************</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// * License and Disclaimer                                           *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// *                                                                  *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// * The  Geant4 software  is  copyright of the Copyright Holders  of *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// * the Geant4 Collaboration.  It is provided  under  the terms  and *</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// * conditions of the Geant4 Software License,  included in the file *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// * LICENSE and available at  http://cern.ch/geant4/license .  These *</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// * include a list of copyright holders.                             *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// *                                                                  *</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// * Neither the authors of this software system, nor their employing *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// * institutes,nor the agencies providing financial support for this *</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// * work  make  any representation or  warranty, express or implied, *</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// * regarding  this  software system or assume any liability for its *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// * use.  Please see the license in the file  LICENSE  and URL above *</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// * for the full disclaimer and the limitation of liability.         *</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// *                                                                  *</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// * This  code  implementation is the result of  the  scientific and *</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// * technical work of the GEANT4 collaboration.                      *</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// * By using,  copying,  modifying or  distributing the software (or *</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// * any work based  on the software)  you  agree  to acknowledge its *</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// * use  in  resulting  scientific  publications,  and indicate your *</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// * acceptance of all terms of the Geant4 Software license.          *</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// ********************************************************************</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// $Id: DetectorConstruction.cc,v 1.1 2010-10-18 15:56:17 maire Exp $</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// GEANT4 tag $Name: not supported by cvs2svn $</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;G4Material.hh&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;G4NistManager.hh&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;G4SubtractionSolid.hh&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;G4Box.hh&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;G4Tubs.hh&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;G4LogicalVolume.hh&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;G4PVPlacement.hh&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;G4PVReplica.hh&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;G4UniformMagField.hh&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;G4GeometryManager.hh&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;G4PhysicalVolumeStore.hh&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;G4LogicalVolumeStore.hh&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;G4SolidStore.hh&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;G4VisAttributes.hh&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;G4Colour.hh&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_s_b_s_variables_8hh.html">SBSVariables.hh</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_s_b_s_constants_8hh.html">SBSConstants.hh</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_e_cal_detector_construction_8hh.html">ECalDetectorConstruction.hh</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_s_b_s_materials_8hh.html">SBSMaterials.hh</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//Perhaps we should include the run Manager as parameter to the class, since it is derived from SBSDetectorConstructio, but for the moment without parameters</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="code" href="class_e_cal_detector_construction.html#ad7b4dc31e1138aa6f3ee99b7b5bc60af">   67</a></span>&#160;<a class="code" href="class_e_cal_detector_construction.html#ad7b4dc31e1138aa6f3ee99b7b5bc60af">ECalDetectorConstruction::ECalDetectorConstruction</a>(G4VPhysicalVolume *physiParent, <a class="code" href="class_s_b_s_materials.html">SBSMaterials</a> *Materials)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    G4cout&lt;&lt;<span class="stringliteral">&quot;&lt;ECalDetectorConstruction::ECalDetectorConstruction&gt;: Creating Calorimeter&quot;</span>&lt;&lt;G4endl;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//number of holes in the calorimeter tiles (should go to .ini for flexibility)</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    TubColumns=12;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    TubRows=12;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">//The Calorimeter as a block with the World as parent</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//All distances are given in mm</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    { </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        Columns=<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#adc90201ebd65e3b3366b1b6f4dff5ebf">NbOfCaloColumns</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        Rows=<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#acf7deca6d17faac95752ce05c0c49d55">NbOfCaloRows</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        CalorY = ((<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>)*(Rows));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        CalorX = ((<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>)*(Columns));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="comment">//check size</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        solidCalor = <span class="keyword">new</span> G4Box(<span class="stringliteral">&quot;SolidCalorimeter&quot;</span>,              <span class="comment">//its name</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                               CalorX/2+1*mm,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                               CalorY/2+1*mm,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                               <a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a3cae081cf9c23144407404b801c21cf7">CalorThickness</a>/2+1*mm);  </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//size of the calorimeter a little bit greater than the size of modules. If I restrict to the size of the modules, the identification of the volume becomes more difficult. Geant4 directly identify the lower volume, in this case the gap, since there are not space where the event makes a step</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        logicCalor = <span class="keyword">new</span> G4LogicalVolume(solidCalor,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                         Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>,    <span class="comment">//its material</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                         <span class="stringliteral">&quot;LogicCalorimeter&quot;</span>);   <span class="comment">//its name</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//The spacial position of the calorimeter</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        Rota = <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a3286bfb8c9f691a7315a5c97c7ea1adc">EleAng</a>;<span class="comment">//angle of the position of ECal (check the units, should be deg)</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        RSRot.rotateX(-Rota);<span class="comment">//Rotation matrix of the calorimeter in order to face the scattered particles perpendicularly  </span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        G4ECalDis = <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ad7c0c85364e09e7dc5f7d687bf7fbbf4">ECalDis</a> + <a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a3cae081cf9c23144407404b801c21cf7">CalorThickness</a>/2; <span class="comment">//the distance from target to the front face of the calorimeter corrected with the position in Geant4 of the calorimeter (in the center of mass of the detector)</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        physiCalor = <span class="keyword">new</span> G4PVPlacement(G4Transform3D(RSRot,G4ThreeVector(0,G4ECalDis * sin(Rota),G4ECalDis *cos(Rota))),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                       <span class="stringliteral">&quot;Calorimeter&quot;</span>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                       logicCalor,  </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                       physiParent,       <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                       <span class="keyword">false</span>,           <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                       0);              <span class="comment">//copy numbe</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">//The modules of the calorimeter with the Calorimeter as parent </span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// because the world can not be used as slice </span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a3cae081cf9c23144407404b801c21cf7">CalorThickness</a> &gt; 0.)  </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    { </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        solidCaloMod = <span class="keyword">new</span> G4Box(<span class="stringliteral">&quot;SolidCaloModul&quot;</span>,              <span class="comment">//its name</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                 <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                 <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,<span class="comment">//size</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                 <a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a3cae081cf9c23144407404b801c21cf7">CalorThickness</a>/2);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        logicCaloMod = <span class="keyword">new</span> G4LogicalVolume(solidCaloMod,        <span class="comment">//its solid</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                           Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>,  <span class="comment">//its material</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                           <span class="stringliteral">&quot;LogicCaloModul&quot;</span>);   <span class="comment">//its name</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;          </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">//The offset is applied to set the Center of the calorimeter at (0,0,0)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        G4ThreeVector offset(-(CalorX-(<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>))/2,-(CalorY-(<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>))/2,0);   </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">for</span> (G4int j=0;j&lt;Rows;j++)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">for</span> (G4int i=0;i&lt;Columns;i++)             </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                physiCaloMod = <span class="keyword">new</span> G4PVPlacement</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    (0,         <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//                   offset + G4ThreeVector((Variables-&gt;CalModSizeXY)*j,(Variables-&gt;CalModSizeXY)*i,0), //at (0,0,0)</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                     offset + G4ThreeVector((<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>)*i,(<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>)*j,0), <span class="comment">//at (0,0,0)</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                     <span class="stringliteral">&quot;CaloModul&quot;</span>,       <span class="comment">//its name</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                     logicCaloMod,      <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                     physiCalor,       <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                     <span class="keyword">false</span>,             <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                     (j*Columns)+i);            <span class="comment">//copy number</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">//with this numeration units make columns, and tenths make rows</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">//e.g. with 15 columns </span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">//0-1-2-3-4-5-6-7-8-9-10-11-12-13-14... first row (i=0-&gt;14;j=0*columns)</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">//15-16-17-18-19-20-21-22-23-24-25-26-27-28-29... second row (i=1-&gt;14;j=1*colums)</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">//***************************************************************                                 </span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// Layer</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">//The calorimeter is formed by layers</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">//each layer consists in absorber and gap</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">//generally absorber=Pb and gap=scintillator</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">//***************************************************************                                 </span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    solidLayer = <span class="keyword">new</span> G4Box(<span class="stringliteral">&quot;SolidLayer&quot;</span>,                        <span class="comment">//its name</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                           <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                           <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2, <span class="comment">//size</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                           <a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a29bf41467669a48826fb1bca3011820f">LayerThickness</a>/2);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    logicLayer = <span class="keyword">new</span> G4LogicalVolume(solidLayer,        <span class="comment">//its solid</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                     Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>,        <span class="comment">//its material</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                     <span class="stringliteral">&quot;LogicLayer&quot;</span>);     <span class="comment">//its name</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    physiLayer = <span class="keyword">new</span> G4PVReplica(<span class="stringliteral">&quot;Layer&quot;</span>,               <span class="comment">//its name</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                 logicLayer,    <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                 logicCaloMod,  <span class="comment">//its mother</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                 kZAxis,                <span class="comment">//axis of replication</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                 <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#adec94678029bfd057c6ba3daabe6f5a3">NbOfLayers</a>, <span class="comment">//number of replica</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                 <a class="code" href="_s_b_s_constants_8hh.html#a96b2d8ab1753781dd604fbe3a719733c">Constants</a>-&gt;<a class="code" href="class_s_b_s_constants.html#a29bf41467669a48826fb1bca3011820f">LayerThickness</a>);    <span class="comment">//witdth of replica</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <span class="comment">//***************************************************************                                     //                              Absorber</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">//***************************************************************                                 </span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      solidAbsorber=0; logicAbsorber=0; physiAbsorber=0;  </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a> &gt; 0.) </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      { </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;          solidAbsorber = <span class="keyword">new</span> G4Box(<span class="stringliteral">&quot;SolidAbsorber&quot;</span>,</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a>/2);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          logicAbsorber = <span class="keyword">new</span> G4LogicalVolume(solidAbsorber,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                                Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a3c95a0095e81186722814118b58aec0c">AbsorberMaterial</a>, <span class="comment">//its material</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                <span class="stringliteral">&quot;LogicAbsorber&quot;</span>); <span class="comment">//name</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;          physiAbsorber = <span class="keyword">new</span> G4PVPlacement(0,             <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                            G4ThreeVector(0.,0.,<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a>/2),  <span class="comment">//its position</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                            logicAbsorber,     <span class="comment">//its logical volume                 </span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                            <span class="stringliteral">&quot;Absorber&quot;</span>, <span class="comment">//its name</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                            logicLayer,        <span class="comment">//its mother</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                            <span class="keyword">false</span>,             <span class="comment">//no boulean operat</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                            0);                <span class="comment">//copy number</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">//                       Absorber Holes</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          solidAbsTub = <span class="keyword">new</span> G4Tubs(<span class="stringliteral">&quot;AbsorberTub&quot;</span>,               <span class="comment">//its name</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                       0,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                       2.*mm,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">//                                     0.75*mm,//Hera-B nominal value</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                       <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a>/2,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                       0*deg,                               </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                       360.*deg);      </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          logicAbsTub = <span class="keyword">new</span> G4LogicalVolume(solidAbsTub,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                              Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>, <span class="comment">//its material(vacuum, for the moment)</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                              <span class="stringliteral">&quot;LogicAbsTub&quot;</span>); <span class="comment">//name</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;          </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">for</span> (G4int j=0;j&lt;TubRows;j++)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;          {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;              <span class="keywordflow">for</span> (G4int i=0;i&lt;TubColumns;i++)        </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;              {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                  physiAbsTub = <span class="keyword">new</span> G4PVPlacement</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                      (0,               <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">//                   offset + G4ThreeVector((Variables-&gt;CalModSizeXY)*j,(Variables-&gt;CalModSizeXY)*i,0), //at (0,0,0)</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                       G4ThreeVector(9.25*mm*i-50.825*mm,9.25*mm*j-50.825*mm,0),        <span class="comment">//at (0,0,0)</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                       <span class="stringliteral">&quot;AbsTubs&quot;</span>,       <span class="comment">//its name</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                       logicAbsTub,     <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                       physiAbsorber,      <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                       <span class="keyword">false</span>,           <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                       (j*Columns)+i);          <span class="comment">//copy number</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                  </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">//same as the numeration of the modules         </span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//with this numeration units make columns, and tenths make rows</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//e.g. with 15 columns </span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">//0-1-2-3-4-5-6-7-8-9-10-11-12-13-14... first row (i=0-&gt;14;j=0*columns)</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">//15-16-17-18-19-20-21-22-23-24-25-26-27-28-29... second row (i=1-&gt;14;j=1*colums)</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                  </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;              }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">//                       Absorber WLS</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          solidAbsWLS = <span class="keyword">new</span> G4Tubs(<span class="stringliteral">&quot;AbsWLS&quot;</span>,            <span class="comment">//its name</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                       0,</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                       0.6*mm,</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                       <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a>/2,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                       0*deg,                               </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                       360.*deg);      </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;          logicAbsWLS = <span class="keyword">new</span> G4LogicalVolume(solidAbsWLS,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                              Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>, <span class="comment">//its material(vacuum, for the moment)</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                              <span class="stringliteral">&quot;LogicAbsWLS&quot;</span>); <span class="comment">//name</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;          </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;          </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;          physiAbsWLS = <span class="keyword">new</span> G4PVPlacement(0,            <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                          G4ThreeVector(0,0.,0.),       <span class="comment">//at (0,0,0)</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                          <span class="stringliteral">&quot;WLSAbs&quot;</span>,     <span class="comment">//its name</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                          logicAbsWLS,  <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                          physiAbsTub,      <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                          <span class="keyword">false</span>,                <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                          0);           <span class="comment">//copy number</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      }<span class="comment">//end Absorber</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="comment">//                        Scintillator (Gap)</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      solidGap=0; logicGap=0; physiGap=0; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a> &gt; 0.)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      { </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          solidGap = <span class="keyword">new</span> G4Box(<span class="stringliteral">&quot;SolidGap&quot;</span>,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a>/2,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                               <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a>/2);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;          </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;          </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          logicGap = <span class="keyword">new</span> G4LogicalVolume(solidGap,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                         Materials-&gt;<a class="code" href="class_s_b_s_materials.html#aff3bcb06f66c199df9ef74ee7528d211">SciMaterial</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                         <span class="stringliteral">&quot;LogicGap&quot;</span>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;          physiGap = <span class="keyword">new</span> G4PVPlacement(0,                      <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                       G4ThreeVector(0.,0.,-<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a>/2),   <span class="comment">//its position</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                       logicGap,               <span class="comment">//its logical volume            </span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                       <span class="stringliteral">&quot;Gap&quot;</span>, <span class="comment">//its name</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                       logicLayer,             <span class="comment">//its mother</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                       <span class="keyword">false</span>,                  <span class="comment">//no boulean operat</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                       0);                     <span class="comment">//copy number</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;          </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="comment">//                       Scintillator (gap) Holes</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          solidGapTub = <span class="keyword">new</span> G4Tubs(<span class="stringliteral">&quot;GapTub&quot;</span>,            <span class="comment">//its name</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                       0,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">//                                     0.75*mm,//Hera-B nominal value</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                       2.*mm,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                       <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a>/2,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                       0*deg,                               </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                       360.*deg);      </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          logicGapTub = <span class="keyword">new</span> G4LogicalVolume(solidGapTub,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                              Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>, <span class="comment">//its material(vacuum, for the moment)</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                              <span class="stringliteral">&quot;LogicGapTub&quot;</span>); <span class="comment">//name</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">for</span> (G4int j=0;j&lt;TubRows;j++)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            <span class="keywordflow">for</span> (G4int i=0;i&lt;TubColumns;i++)          </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                physiGapTub = <span class="keyword">new</span> G4PVPlacement</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                    (0,         <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">//                   offset + G4ThreeVector((Variables-&gt;CalModSizeXY)*j,(Variables-&gt;CalModSizeXY)*i,0), //at (0,0,0)</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                     G4ThreeVector(9.25*mm*i-50.825*mm,9.25*mm*j-50.825*mm,0),  <span class="comment">//at (0,0,0)</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                     <span class="stringliteral">&quot;GapTubs&quot;</span>, <span class="comment">//its name</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                     logicGapTub,       <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                     physiGap,      <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                     <span class="keyword">false</span>,             <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                     (j*Columns)+i);            <span class="comment">//copy number</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">//same as the numeration of the modules         </span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">//with this numeration units make columns, and tenths make rows</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">//e.g. with 15 columns </span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">//0-1-2-3-4-5-6-7-8-9-10-11-12-13-14... first row (i=0-&gt;14;j=0*columns)</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">//15-16-17-18-19-20-21-22-23-24-25-26-27-28-29... second row (i=1-&gt;14;j=1*colums)</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="comment">//                       Scintillator (gap) WLS</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="comment">//***************************************************************</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          solidGapWLS = <span class="keyword">new</span> G4Tubs(<span class="stringliteral">&quot;GapWLS&quot;</span>,            <span class="comment">//its name</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                       0,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                                       0.6*mm,</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                       <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a>/2,</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                       0*deg,                               </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                       360.*deg);      </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;          logicGapWLS = <span class="keyword">new</span> G4LogicalVolume(solidGapWLS,    <span class="comment">//its solid</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                              Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a9b29b0479ee57f534626d4b83aff7f78">defaultMaterial</a>, <span class="comment">//its material(vacuum, for the moment)</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                              <span class="stringliteral">&quot;LogicGapWLS&quot;</span>); <span class="comment">//name</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;          </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          physiGapWLS = <span class="keyword">new</span> G4PVPlacement(0,            <span class="comment">//no rotation</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                          G4ThreeVector(0,0.,0.),       <span class="comment">//at (0,0,0)</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                          <span class="stringliteral">&quot;WLSGap&quot;</span>,     <span class="comment">//its name</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                          logicGapWLS,  <span class="comment">//its logical volume</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                          physiGapTub,      <span class="comment">//its mother  volume(passed)</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                          <span class="keyword">false</span>,                <span class="comment">//no boolean operation</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                          0);           <span class="comment">//copy number</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;          </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">//                        Summary of the calorimeter</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......  </span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  G4cout &lt;&lt; <span class="stringliteral">&quot;\n------------------------------------------------------------&quot;</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;\n---&gt; The calorimeter is &quot;</span> &lt;&lt; <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#adec94678029bfd057c6ba3daabe6f5a3">NbOfLayers</a> &lt;&lt; <span class="stringliteral">&quot; layers of: [ &quot;</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            &lt;&lt; <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#ac18998a9e16bed4d4737bd3fdbe3032e">LeadThickness</a>/mm &lt;&lt; <span class="stringliteral">&quot;mm of &quot;</span> &lt;&lt; Materials-&gt;<a class="code" href="class_s_b_s_materials.html#a3c95a0095e81186722814118b58aec0c">AbsorberMaterial</a>-&gt;GetName() </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         &lt;&lt; <span class="stringliteral">&quot; + &quot;</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;         &lt;&lt; <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#abb259dd81111497ec4db2fe9199f2d01">ScintThickness</a>/mm &lt;&lt; <span class="stringliteral">&quot;mm of &quot;</span> &lt;&lt; Materials-&gt;<a class="code" href="class_s_b_s_materials.html#aff3bcb06f66c199df9ef74ee7528d211">SciMaterial</a>-&gt;GetName() &lt;&lt; <span class="stringliteral">&quot; ] &quot;</span> </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;         &lt;&lt; <span class="stringliteral">&quot;With a cross section per module of: &quot;</span> &lt;&lt; <a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a92e4bb3f201e0cff282ca71215348156">CalModSizeXY</a> /mm &lt;&lt;<span class="stringliteral">&quot;mm&quot;</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         &lt;&lt;<span class="stringliteral">&quot;\n------------------------------------------------------------\n&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="comment">//                                        </span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// Visualization attributes</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// logicWorld-&gt;SetVisAttributes (G4VisAttributes::Invisible);</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  G4VisAttributes* simpleBoxVisAtt= <span class="keyword">new</span> G4VisAttributes(G4Colour(1.0,1.0,1.0));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  simpleBoxVisAtt-&gt;SetVisibility(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  G4VisAttributes* TubVisAtt = <span class="keyword">new</span> G4VisAttributes(G4Colour(0.5,0.5,.5));<span class="comment">//Gray</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">//in case we want to debug the fibers</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">//  G4VisAttributes* WLSAbsVisAtt = new G4VisAttributes(G4Colour(0.6,0.,0.6,0.5));//abs wls</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  G4VisAttributes* WLSVisAtt = <span class="keyword">new</span> G4VisAttributes(G4Colour(0.,1.,0.));<span class="comment">//Green</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  WLSVisAtt-&gt;SetForceSolid(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  G4VisAttributes* GapVisAtt = <span class="keyword">new</span> G4VisAttributes(G4Colour(0.1,0.5,.9));<span class="comment">//kind a blue</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  G4VisAttributes* AbsVisAtt = <span class="keyword">new</span> G4VisAttributes(G4Colour(1.,1.,0.));<span class="comment">//yellow</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  G4VisAttributes* LayVisAtt = <span class="keyword">new</span> G4VisAttributes(G4Colour(1.,0.,1.));<span class="comment">//magenta</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">//Visualitation of the layers (switch in SBS.ini file)</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="_s_b_s_variables_8hh.html#aaa4c7e8ec08cba6569c1ae6ddaa0a388">Variables</a>-&gt;<a class="code" href="class_s_b_s_variables.html#a370739e528c9193ac1da6d4fed91c882">ECalDetail</a>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    { </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="comment">//Layers visible (modules and calorimeter box invisible)</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      logicGap-&gt;SetVisAttributes(GapVisAtt);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      logicAbsorber-&gt;SetVisAttributes(AbsVisAtt);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="comment">//      logicGapTub -&gt;SetVisAttributes(G4VisAttributes::Invisible); </span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="comment">//  logicAbsTub -&gt;SetVisAttributes(G4VisAttributes::Invisible); </span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      logicGapTub -&gt;SetVisAttributes(TubVisAtt);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      logicAbsTub -&gt;SetVisAttributes(TubVisAtt);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      logicAbsWLS -&gt;SetVisAttributes(WLSVisAtt);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      logicGapWLS -&gt;SetVisAttributes(WLSVisAtt);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;     </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      logicCaloMod-&gt;SetVisAttributes(G4VisAttributes::Invisible);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      logicCalor  -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="comment">//Layers invisible (only the calorimeter box and modules)</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      logicCalor   -&gt;SetVisAttributes(simpleBoxVisAtt);  </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      logicCaloMod -&gt;SetVisAttributes(LayVisAtt);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      logicGapTub  -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      logicAbsTub  -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      logicAbsWLS  -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      logicGapWLS  -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      logicGap     -&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      logicAbsorber-&gt;SetVisAttributes(G4VisAttributes::Invisible); </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      logicLayer   -&gt;SetVisAttributes(G4VisAttributes::Invisible);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; <span class="comment">/*</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">  // Below are vis attributes that permits someone to test / play </span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">  // with the interactive expansion / contraction geometry system of the</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">  // vis/OpenInventor driver :</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">  // Should be implemented with an external option so it is not necessary compile</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">  //every time</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment"> {G4VisAttributes* simpleBoxVisAtt= new G4VisAttributes(G4Colour(1.0,1.0,0.0));</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">  simpleBoxVisAtt-&gt;SetVisibility(true);</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">  delete logicCalor-&gt;GetVisAttributes();</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">  logicCalor-&gt;SetVisAttributes(simpleBoxVisAtt);}</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment"> {G4VisAttributes* atb= new G4VisAttributes(G4Colour(1.0,0.0,0.0));</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">  logicLayer-&gt;SetVisAttributes(atb);}</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">  </span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment"> {G4VisAttributes* atb= new G4VisAttributes(G4Colour(0.0,1.0,0.0));</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  atb-&gt;SetForceSolid(true);</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  logicAbsorber-&gt;SetVisAttributes(atb);}</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">  </span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment"> {//Set opacity = 0.2 then transparency = 1 - 0.2 = 0.8</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">  G4VisAttributes* atb= new G4VisAttributes(G4Colour(0.0,0.0,1.0,0.2));</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">  atb-&gt;SetForceSolid(true);</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">  logicGap-&gt;SetVisAttributes(atb);}</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;     </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="code" href="class_e_cal_detector_construction.html#a28e034fc3c3961369812c3e363719072">  481</a></span>&#160;<a class="code" href="class_e_cal_detector_construction.html#a28e034fc3c3961369812c3e363719072">ECalDetectorConstruction::~ECalDetectorConstruction</a>()</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{ </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    G4cout&lt;&lt;<span class="stringliteral">&quot;&lt;ECalDetectorConstruction::~ECalDetectorConstruction()&gt;: Finished&quot;</span>&lt;&lt;G4endl;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;}</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">G4VPhysicalVolume* ECalDetectorConstruction::Construct()</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  return ConstructCalorimeter();</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">G4VPhysicalVolume* ECalDetectorConstruction::ConstructCalorimeter()</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">void DetectorConstruction::SetLeadThickness(G4double val)</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">  // change Absorber thickness and recompute the calorimeter parameters</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">  LeadThickness = val;</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">void DetectorConstruction::SetScintThickness(G4double val)</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">  // change Gap thickness and recompute the calorimeter parameters</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">  ScintThickness = val;</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">void DetectorConstruction::SetCalorSizeYZ(G4double val)</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">  // change the transverse size and recompute the calorimeter parameters</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">  CalorSizeYZ = val;</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">void DetectorConstruction::SetNbOfLayers(G4int val)</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">  NbOfLayers = val;</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">#include &quot;G4RunManager.hh&quot;</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">void EcalDetectorConstruction::UpdateGeometry()</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">  G4RunManager::GetRunManager()-&gt;DefineWorldVolume(ConstructCalorimeter());</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">}</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">//....oooOO0OOooo........oooOO0OOooo........oooOO0OOooo........oooOO0OOooo......</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jul 25 2013 17:05:44 for SBS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
